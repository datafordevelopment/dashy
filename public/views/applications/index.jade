extends ../layout

block content
  #apps
    header
      .row
        .col-sm-6
          .select
            a(href="javascript:;", ng-click="open = !open", ng-class="{'active': open}")
              {{activeApp.name}}
              i.glyphicon.glyphicon-chevron-right
            ul.options(ng-show="open")
              li(ng-repeat="app in apps")
                a(href="javascript:;", ng-click="$parent.activeApp = app; $parent.open = false") {{app.name}}

          p Key: {{activeApp.key}}


        .col-sm-6.text-right
          a.btn.btn-primary(href="/applications/new")
            i.glyphicon.glyphicon-heart
            | &nbsp;Create an App

    .content.clearfix
      ul(ng-show="activeApp.requests.length > 0")
        li.request(ng-repeat="request in activeApp.requests")
          <h4>{{request.endpoint}}</h4>
          ul
            li(ng-repeat="r in activeApp.requests[$index]")
              span(ng-class="{'success': r.success, 'fail': !r.success}") &nbsp;
              {{r.date}}

      p(ng-show="activeApp.requests.length === 0") No requests sent yet


block js
  script.
    angular.module('app')
    .run(function ($rootScope) {
      $rootScope.apps = !{JSON.stringify(apps)};
      $rootScope.activeApp = $rootScope.apps[0];
    });